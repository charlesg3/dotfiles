#!/bin/bash

# If not running interactively, don't do anything
[ -z "$PS1" ] && return

export PATH="$HOME/.local/bin:$HOME/src/dotfiles/scripts:$PATH"

alias vim='nvim'
alias tree='tree -C'
alias update-config='$HOME/src/dotfiles/install.sh --nvim'
command -v colordiff &>/dev/null && alias diff='colordiff'
alias tmux='tmux -2'
alias ll='ls -l'
alias dirsize='du -sm ./* | sort -g'
alias ffs='sudo !!'

alias grep='grep --color=auto'
alias igrep='grep -i --color=auto'
alias rgrep='grep -r --color=auto'
alias irgrep='grep -ri --color=auto'
alias rigrep='grep -ri --color=auto'

alias youtube-dl-mp3='youtube-dl --output "%(title)s.%(ext)s" --cookie ~/Downloads/youtube.com_cookies.txt -x --audio-format mp3'
alias yt-dl-mp3='yt-dlp --output "%(title)s.%(ext)s" --yes-playlist --cookies ~/Downloads/youtube.com_cookies.txt -x --audio-format mp3'

export TERM=xterm-256color
export HISTCONTROL=ignoredups

unset JAVA_TOOL_OPTIONS

ulimit -c unlimited

shopt -s checkwinsize

# enable color support of ls
if [ "$TERM" != "dumb" ]; then
    eval "$(dircolors -b)"
    alias ls='ls --color=auto'
fi

# make less more friendly for non-text input files
[ -x /usr/bin/lesspipe ] && eval "$(lesspipe)"

# set terminal title to user@host:dir
case "$TERM" in
xterm*|rxvt*|vt102|screen*)
    PROMPT_COMMAND='echo -ne "\033]0;${USER}@${HOSTNAME}: ${PWD}\007"'
    export PROMPT_COMMAND
    ;;
esac

# set variable identifying the chroot you work in
if [ -z "$debian_chroot" ] && [ -r /etc/debian_chroot ]; then
    debian_chroot=$(cat /etc/debian_chroot)
fi

# colorful prompt
case "$TERM" in
xterm*|rxvt*|screen*|vt102)
    PS1='${debian_chroot:+($debian_chroot)}\[\033[00;32m\]\u\[\033[00;31m\]@\[\033[00;32m\]\h\[\033[00m\]:\[\033[00;36m\]\w\[\033[00;33m\]\$\[\033[00m\] '
    ;;
*)
    PS1='${debian_chroot:+($debian_chroot)}\u@\h:\w→ '
    ;;
esac

PS2='$'

# bash completion
if [ -f /etc/bash_completion ]; then
    . /etc/bash_completion
fi

# ── Local overrides (machine-specific, not tracked) ──────────────────────────
[ -f "$HOME/.bashrc.local" ] && . "$HOME/.bashrc.local"
